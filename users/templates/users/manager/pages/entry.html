{% extends 'users/manager/manager-layout.html' %}
{% load static %}

{% block title %}Task Manage System - –ú–∞—à–∏–Ω—ã –Ω–∞ –≤—ä–µ–∑–¥{% endblock %}

{% block style %}
    {{ super }}
    <link rel="stylesheet" href="{% static 'users/css/additional-styles/tasks-styles.css' %}">
    <link rel="stylesheet" href="{% static 'users/css/page-styles/manager/entry.css' %}">
{% endblock %}

{% block main-content %}
    <main>
        <div class="right-content">
            <h1>–ú–∞—à–∏–Ω—ã –Ω–∞ –≤—ä–µ–∑–¥</h1>
            <div class="date">
                <p id="currentDateTime"></p>
            </div>

            <div class="buttons">
                <div class="select-task-type">
                    <button class="add-task">üìù –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</button>
                    <div class="droplist" id="dropdownList">
                        <form action="{% url 'manager_add_entry_task' %}" method="get">
                            <button>–ú–∞—à–∏–Ω–∞ –Ω–∞ –≤—ä–µ–∑–¥</button>
                        </form>
                        
                        <form action="{% url 'manager_add_counterparties' %}" method="get">
                            <button>–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç</button>
                        </form>
                    </div>
                </div>

                <div class="parent-element">
                    <button class="calendar-btn" id="calendar-button">üóìÔ∏è –í—ã–±—Ä–∞—Ç—å –¥–∞—Ç—É</button>
                    <div class="calendar-container" id="calendar-container">
                        <input type="date" id="date-picker" value="{{ current_date }}">
                    </div>
                </div>
            </div>

            {% for task in entrytasks %}
                <div class="entry-task">
                    <h3 class="heading">–ú–∞—à–∏–Ω–∞ –Ω–∞ –≤—ä–µ–∑–¥</h3>
                    <h4 class="text-left">–ì–æ—Å.–ù–æ–º–µ—Ä: <span>{{ task.number_auto }}</span></h4>
                    <div class="status {% if task.is_allowed %}allowed{% else %}denied{% endif %}">
                        –í—ä–µ–∑–¥: {% if task.is_allowed %}–†–∞–∑—Ä–µ—à–µ–Ω{% else %}–ó–∞–ø—Ä–µ—â–µ–Ω{% endif %}
                    </div>
                    <h4 class="text-left">–ú–∞—Ä–∫–∞ –∞–≤—Ç–æ: <span>{{ task.marka_auto }}</span></h4>
                    <h4 class="text-left">–ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏: <span>{{ task.name_organization }}</span></h4>
                    <h4 class="text-left">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: <span>{{ task.description }}</span></h4>
                    <h4 class="text-right">–í—Ä–µ–º—è –≤—ä–µ–∑–¥–∞: <span>{{ task.date }} {{ task.time }}</span></h4>
                    <h4 class="text-right">–ê–≤—Ç–æ—Ä –∑–∞–¥–∞—á–∏: {{ task.author.username }}</h4>

                    <form action="{% url 'manager_edit_entry_task' id=task.id %}" method="get">
                        <button class="edit-entry-button">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                    </form>
                </div>
            {% endfor %}

            {% for counter in counterparties %}
                <div class="kontragent">
                    <h3 class="heading">–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç ‚Ññ {{ counter.id }}</h3>
                    <h4 class="text-left">–ì–æ—Å. –ù–æ–º–µ—Ä –∞–≤—Ç–æ: <span>{{ counter.number_auto }}</span></h4>
                    <h4 class="text-left">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: <span>{{ counter.description }}</span></h4>
                    <h4 class="text-right">–í—Ä–µ–º—è –≤—ä–µ–∑–¥–∞: <span>{{ counter.date_entry }}</span></h4>
                    <h4 class="text-right">–î–æ–±–∞–≤–∏–ª: <span>{{ counter.author }}</span></h4>
                </div>
            {% endfor %}
        </div>
    </main>

<!-- SCRIPTS -->
<script src="{% static 'users/js/current-date.js' %}"></script>
<script src="{% static 'users/js/calendar-container.js' %}"></script>
<script src="{% static 'users/js/drop-list.js' %}"></script>
{% endblock %}