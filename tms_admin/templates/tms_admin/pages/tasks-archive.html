{% extends 'tms_admin/admin-layout.html' %}
{% load static %}

{% block title %}Task Manage System - –ê—Ä—Ö–∏–≤ –∑–∞–¥–∞—á{% endblock %}

{% block style %}
    {{ super }}
    <link rel="stylesheet" href="{% static 'tms_admin/css/page-styles/tasks-archive.css' %}">
    <link rel="stylesheet" href="{% static 'tms_admin/css/additional-styles/tasks-styles.css' %}">
{% endblock %}

{% block main-content %}
<main>
    <div class="right-content">
        <h1>–ê—Ä—Ö–∏–≤ –∑–∞–¥–∞—á</h1>
        <div class="date">
            <p id="currentDateTime"></p>
        </div>

        <form id="searchForm" method="get">
            <h2>–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á</h2>
            <label for="filterType">–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ</label>
            <select id="filterType" name="filterType" onchange="toggleFilters()">
                <option value="date">–ü–æ –¥–∞—Ç–µ</option>
                <option value="carNumber">–ü–æ –Ω–æ–º–µ—Ä—É –º–∞—à–∏–Ω—ã</option>
                <option value="completedStatus">–ü–æ —Å—Ç–∞—Ç—É—Å—É</option>
            </select>
            
            <!-- –°–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–∞ -->
            <input type="hidden" id="filterValue" name="filterValue" />
            
            <div class="input-group date-filter">
                <label for="dateInput">–î–∞—Ç–∞:</label><br>
                <input type="date" id="dateInput" name="dateInput">
            </div>
            
            <div class="input-group car-number-filter">
                <label for="carNumberInput">–ù–æ–º–µ—Ä –º–∞—à–∏–Ω—ã:</label><br>
                <input type="text" id="carNumberInput" name="carNumberInput" placeholder="A111–ê–ê11">
            </div>
    
            <div class="input-group completed-status-filter">
                <label for="completedStatusSelect">–°—Ç–∞—Ç—É—Å:</label><br>
                <select id="completedStatusSelect" name="completedStatusSelect">
                    <option value="true">–ó–∞–≤–µ—Ä—à–µ–Ω–∞</option>
                    <option value="false">–ù–ï –∑–∞–≤–µ—Ä—à–µ–Ω–∞</option>
                </select>
            </div>
            
            <button type="submit">üîç –ò—Å–∫–∞—Ç—å</button>
        </form>

        <div class="tasks-list">
            <div class="uncompleted-tasks-list">
                {% for task in uncompleted_text_results %}
                    <div class="text-task">
                        <h3 class="heading">{{ task.title }} (–ù–ï –ó–ê–í–ï–†–®–ï–ù–ê)</h3>
                        <p class="text-left">{{ task.full_text }}</p>
                        <h3 class="text-right">–î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏: {{ task.date }}</h3>
                        <h3 class="text-right">–í—Ä–µ–º—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏: {{ task.time }}</h3>
                        <h3 class="text-right">–ê–≤—Ç–æ—Ä –∑–∞–¥–∞—á–∏: {{ task.author.username }}</h3>
                    </div>
                {% endfor %}

                {% for task in uncompleted_entry_results %}
                    <div class="entry-task">
                        <h3 class="heading">–ú–∞—à–∏–Ω–∞ –Ω–∞ –≤—ä–µ–∑–¥ (–ù–ï –ó–ê–í–ï–†–®–ï–ù–ê)</h3>
                        <h4 class="text-left">–ì–æ—Å.–ù–æ–º–µ—Ä: <span>{{ task.number_auto }}</span></h4>
                        <div class="status {% if task.is_allowed %}allowed{% else %}denied{% endif %}">
                            –í—ä–µ–∑–¥: {% if task.is_allowed %}–†–∞–∑—Ä–µ—à–µ–Ω{% else %}–ó–∞–ø—Ä–µ—â–µ–Ω{% endif %}
                        </div>
                        <h4 class="text-left">–ú–∞—Ä–∫–∞ –∞–≤—Ç–æ: <span>{{ task.marka_auto }}</span></h4>
                        <h4 class="text-left">–ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏: <span>{{ task.name_organization }}</span></h4>
                        <h4 class="text-left">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: <span>{{ task.description }}</span></h4>
                        <h4 class="text-right">–í—Ä–µ–º—è –≤—ä–µ–∑–¥–∞: <span>{{ task.date }} {{ task.time }}</span></h4>
                        <h4 class="text-right">–ê–≤—Ç–æ—Ä –∑–∞–¥–∞—á–∏: {{ task.author.username }}</h4>
                        <h4 class="text-right">–í—Ä–µ–º—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏: {{ task.date_time_add }}</h4>
                    </div>
                {% endfor %}

                {% for task in uncompleted_exit_results %}
                    <div class="exit-task">
                        <h3 class="heading">–ú–∞—à–∏–Ω–∞ –Ω–∞ –≤—ã–µ–∑–¥ (–ù–ï –ó–ê–í–ï–†–®–ï–ù–ê)</h3>
                        <h4 class="text-left">–ì–æ—Å.–ù–æ–º–µ—Ä: <span>{{ task.number_auto }}</span></h4>
                        <div class="status {% if task.is_allowed %}allowed{% else %}denied{% endif %}">
                            –í—ã–µ–∑–¥: {% if task.is_allowed %}–†–∞–∑—Ä–µ—à–µ–Ω{% else %}–ó–∞–ø—Ä–µ—â–µ–Ω{% endif %}
                        </div>
                        <h4 class="text-left">–ú–∞—Ä–∫–∞ –∞–≤—Ç–æ: <span>{{ task.marka_auto }}</span></h4>
                        <h4 class="text-left">–ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏: <span>{{ task.name_organization }}</span></h4>
                        <h4 class="text-left">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: <span>{{ task.description }}</span></h4>
                        <h4 class="text-right">–í—Ä–µ–º—è –≤—ã–µ–∑–¥–∞: <span>{{ task.date }} {{ task.time }}</span></h4>
                        <h4 class="text-right">–ê–≤—Ç–æ—Ä –∑–∞–¥–∞—á–∏: {{ task.author.username }}</h4>
                        <h4 class="text-right">–í—Ä–µ–º—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏: {{ task.date_time_add }}</h4>
                    </div>
                {% endfor %}
            </div>

            <div class="completed-tasks-list">
                {% for task in completed_text_results %}
                    <div class="text-task">
                        <h3 class="heading">{{ task.title }} (–ó–ê–í–ï–†–®–ï–ù–ê)</h3>
                        <p class="text-left">{{ task.full_text }}</p>
                        <h3 class="text-right">–î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏: {{ task.date }}</h3>
                        <h3 class="text-right">–í—Ä–µ–º—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏: {{ task.time }}</h3>
                        <h3 class="text-right">–ê–≤—Ç–æ—Ä –∑–∞–¥–∞—á–∏: {{ task.author.username }}</h3>
                        <h3 class="text-right" style="color: #FF5252;">–í—Ä–µ–º—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è: {{ task.completed_at }}</h3>
                        <h3 class="text-right" style="color: #FF5252;">–ö—Ç–æ –∑–∞–≤–µ—Ä—à–∏–ª: {{ task.completed_by }}</h3>
                    </div>
                {% endfor %}

                {% for task in completed_entry_results %}
                    <div class="entry-task">
                        <h3 class="heading">–ú–∞—à–∏–Ω–∞ –Ω–∞ –≤—ä–µ–∑–¥ (–ó–ê–í–ï–†–®–ï–ù–ê)</h3>
                        <h4 class="text-left">–ì–æ—Å.–ù–æ–º–µ—Ä: <span>{{ task.number_auto }}</span></h4>
                        <div class="status {% if task.is_allowed %}allowed{% else %}denied{% endif %}">
                            –í—ä–µ–∑–¥ (—Å—Ç–∞—Ç—É—Å –Ω–∞ –º–æ–º–µ–Ω—Ç –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è): {% if task.is_allowed %}–†–∞–∑—Ä–µ—à–µ–Ω{% else %}–ó–∞–ø—Ä–µ—â–µ–Ω{% endif %}
                        </div>
                        <h4 class="text-left">–ú–∞—Ä–∫–∞ –∞–≤—Ç–æ: <span>{{ task.marka_auto }}</span></h4>
                        <h4 class="text-left">–ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏: <span>{{ task.name_organization }}</span></h4>
                        <h4 class="text-left">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: <span>{{ task.description }}</span></h4>
                        <h4 class="text-right">–í—Ä–µ–º—è –≤—ä–µ–∑–¥–∞: <span>{{ task.date }} {{ task.time }}</span></h4>
                        <h4 class="text-right">–ê–≤—Ç–æ—Ä –∑–∞–¥–∞—á–∏: {{ task.author.username }}</h4>
                        <h3 class="text-right" style="color: #FF5252;">–í—Ä–µ–º—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è: {{ task.completed_at }}</h3>
                        <h3 class="text-right" style="color: #FF5252;">–ö—Ç–æ –∑–∞–≤–µ—Ä—à–∏–ª: {{ task.completed_by }}</h3>
                        <h4 class="text-right">–í—Ä–µ–º—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏: {{ task.date_time_add }}</h4>
                    </div>
                {% endfor %}

                {% for task in completed_exit_results %}
                    <div class="exit-task">
                        <h3 class="heading">–ú–∞—à–∏–Ω–∞ –Ω–∞ –≤—ã–µ–∑–¥ (–ó–ê–í–ï–†–®–ï–ù–ê)</h3>
                        <h4 class="text-left">–ì–æ—Å.–ù–æ–º–µ—Ä: <span>{{ task.number_auto }}</span></h4>
                        <div class="status {% if task.is_allowed %}allowed{% else %}denied{% endif %}">
                            –í—ã–µ–∑–¥ (—Å—Ç–∞—Ç—É—Å –º–æ–º–µ–Ω—Ç –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è): {% if task.is_allowed %}–†–∞–∑—Ä–µ—à–µ–Ω{% else %}–ó–∞–ø—Ä–µ—â–µ–Ω{% endif %}
                        </div>
                        <h4 class="text-left">–ú–∞—Ä–∫–∞ –∞–≤—Ç–æ: <span>{{ task.marka_auto }}</span></h4>
                        <h4 class="text-left">–ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏: <span>{{ task.name_organization }}</span></h4>
                        <h4 class="text-left">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: <span>{{ task.description }}</span></h4>
                        <h4 class="text-right">–í—Ä–µ–º—è –≤—ã–µ–∑–¥–∞: <span>{{ task.date }} {{ task.time }}</span></h4>
                        <h4 class="text-right">–ê–≤—Ç–æ—Ä –∑–∞–¥–∞—á–∏: {{ task.author.username }}</h4>
                        <h3 class="text-right" style="color: #FF5252;">–í—Ä–µ–º—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è: {{ task.completed_at }}</h3>
                        <h3 class="text-right" style="color: #FF5252;">–ö—Ç–æ –∑–∞–≤–µ—Ä—à–∏–ª: {{ task.completed_by }}</h3>
                        <h4 class="text-right">–í—Ä–µ–º—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏: {{ task.date_time_add }}</h4>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
</main>

<!-- SCRIPTS -->
<script src="{% static 'tms_admin/js/current-date.js' %}"></script>
<script src="{% static 'tms_admin/js/archive-filter.js' %}"></script>
{% endblock %}