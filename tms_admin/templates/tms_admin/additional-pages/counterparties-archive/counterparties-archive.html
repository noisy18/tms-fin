{% extends 'tms_admin/admin-layout.html' %}
{% load static %}

{% block title %}Task Manage System - –ê—Ä—Ö–∏–≤ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤ –∏ –¥–æ—Å—Ç–∞–≤–∫–∏{% endblock %}

{% block style %}
    {{ super }}
    <link rel="stylesheet" href="{% static 'tms_admin/css/additional-styles/calendar-container.css' %}">
    <link rel="stylesheet" href="{% static 'tms_admin/css/page-styles/counterparties-delivery.css' %}">
    <link rel="stylesheet" href="{% static 'tms_admin/css/page-styles/tasks-archive.css' %}">
{% endblock %}

{% block main-content %}
<main>
    <div class="right-content">
        <h1>–ê—Ä—Ö–∏–≤ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤ –∏ –¥–æ—Å—Ç–∞–≤–∫–∏</h1>
        <div class="date">
            <p id="currentDateTime"></p>
        </div>

        <form id="searchForm" method="get">
            <h2>–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á</h2>
            <label for="filterType">–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ</label>
            <select id="filterType" name="filterType" onchange="toggleFilters()">
                <option value="carNumber">–ü–æ –Ω–æ–º–µ—Ä—É –º–∞—à–∏–Ω—ã</option>
                <option value="completedStatus">–ü–æ —Å—Ç–∞—Ç—É—Å—É</option>
            </select>
            
            <!-- –°–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–∞ -->
            <input type="hidden" id="filterValue" name="filterValue" />
            
            <div class="input-group date-filter">
                <label for="dateInput">–î–∞—Ç–∞:</label><br>
                <input type="date" id="dateInput" name="dateInput">
            </div>
            
            <div class="input-group car-number-filter">
                <label for="carNumberInput">–ù–æ–º–µ—Ä –º–∞—à–∏–Ω—ã:</label><br>
                <input type="text" id="carNumberInput" name="carNumberInput" placeholder="A111–ê–ê11">
            </div>
    
            <div class="input-group completed-status-filter">
                <label for="completedStatusSelect">–°—Ç–∞—Ç—É—Å:</label><br>
                <select id="completedStatusSelect" name="completedStatusSelect">
                    <option value="true">–ó–∞–≤–µ—Ä—à–µ–Ω–∞</option>
                    <option value="false">–ù–ï –∑–∞–≤–µ—Ä—à–µ–Ω–∞</option>
                </select>
            </div>
            
            <button type="submit">üîç –ò—Å–∫–∞—Ç—å</button>
        </form>

        <div class="tasks-list">
            <div class="task">
                {% for kontr in uncompleted_counterparties %}
                    <div class="kontragent" style="border: 10px solid red;">
                        <h3 class="heading">–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç ‚Ññ {{ counter.id }} (–ù–ï –ó–ê–í–ï–†–ï–®–ï–ù–ê)</h3>
                        <h4 class="text-left">–ì–æ—Å. –ù–æ–º–µ—Ä –∞–≤—Ç–æ: <span>{{ counter.number_auto }}</span></h4>
                        <h4 class="text-left">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: <span>{{ counter.description }}</span></h4>
                        <h4 class="text-right">–í—Ä–µ–º—è –≤—ä–µ–∑–¥–∞: <span>{{ counter.date_entry }}</span></h4>
                        <h4 class="text-right">–î–æ–±–∞–≤–∏–ª: <span>{{ counter.author }}</span></h4>
                    </div>
                {% endfor %}

                {% for counter in completed_counterparties %}
                    <div class="kontragent">
                        <h3 class="heading">–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç ‚Ññ {{ counter.id }} (–ó–ê–í–ï–†–ï–®–ï–ù–ê)</h3>
                        <h4 class="text-left">–ì–æ—Å. –ù–æ–º–µ—Ä –∞–≤—Ç–æ: <span>{{ counter.number_auto }}</span></h4>
                        <h4 class="text-left">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: <span>{{ counter.description }}</span></h4>
                        <h4 class="text-right">–í—Ä–µ–º—è –≤—ä–µ–∑–¥–∞: <span>{{ counter.date_entry }}</span></h4>
                        <h4 class="text-right">–î–æ–±–∞–≤–∏–ª: <span>{{ counter.author }}</span></h4>
                        <h4 class="text-right" style="color: #FF5252;">–ö—Ç–æ –≤—ã–ø—É—Å—Ç–∏–ª: {{ counter.completed_by }}</h4>
                        <h4 class="text-right" style="color: #FF5252;">–í–æ —Å–∫–æ–ª—å–∫–æ –≤—ã–ø—É—Å—Ç–∏–ª: {{ counter.date_exit }}</h4>
                    </div>
                {% endfor %}
            </div>
            <div class="task">
                {% for del in uncompleted_delivery %}
                    <div class="delivery" style="border: 10px solid red;">
                        <h3 class="heading">–î–æ—Å—Ç–∞–≤–∫–∞ ‚Ññ {{ del.id }} (–ù–ï –ó–ê–í–ï–†–®–ï–ù–ê)</h3>
                        <h4 class="text-left">–ì–æ—Å. –ù–æ–º–µ—Ä –∞–≤—Ç–æ: <span>{{ del.number_auto }}</span></h4>
                        <h4 class="text-left">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: <span>{{ del.description }}</span></h4>
                        <h4 class="text-right">–í—Ä–µ–º—è –≤—ä–µ–∑–¥–∞: <span>{{ del.date_entry }}</span></h4>
                        <h4 class="text-right">–î–æ–±–∞–≤–∏–ª: <span>{{ del.author }}</span></h4>
                    </div>
                {% endfor %}

                {% for del in completed_delivery %}
                    <div class="delivery">
                        <h3 class="heading">–î–æ—Å—Ç–∞–≤–∫–∞ ‚Ññ {{ del.id }} (–ó–ê–í–ï–†–®–ï–ù–ê)</h3>
                        <h4 class="text-left">–ì–æ—Å. –ù–æ–º–µ—Ä –∞–≤—Ç–æ: <span>{{ del.number_auto }}</span></h4>
                        <h4 class="text-left">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: <span>{{ del.description }}</span></h4>
                        <h4 class="text-right">–í—Ä–µ–º—è –≤—ä–µ–∑–¥–∞: <span>{{ del.date_entry }}</span></h4>
                        <h4 class="text-right">–î–æ–±–∞–≤–∏–ª: <span>{{ del.author }}</span></h4>
                        <h4 class="text-right" style="color: #FF5252;">–ö—Ç–æ –≤—ã–ø—É—Å—Ç–∏–ª: {{ del.completed_by }}</h4>
                        <h4 class="text-right" style="color: #FF5252;">–í–æ —Å–∫–æ–ª—å–∫–æ –≤—ã–ø—É—Å—Ç–∏–ª: {{ del.date_exit }}</h4>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
</main>

<!-- SCRIPTS -->
<script src="{% static 'tms_admin/js/current-date.js' %}"></script>
<script src="{% static 'tms_admin/js/archive-filter.js' %}"></script>
{% endblock %}